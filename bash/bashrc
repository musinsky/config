# 2024-01-18
# https://github.com/musinsky/config/blob/master/bash/bashrc
#
# /etc/skel/.bashrc        # default '.basrc' file
# $ source $HOME/.bashrc   # reload  '.bashrc' settings

# https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html
HISTCONTROL=ignoreboth:erasedups
HISTIGNORE=?:??:*crypt*:*passw*:history
HISTFILESIZE=99999   # file
HISTSIZE=99999       # memory

export LESSHISTFILE=-
export EDITOR='emacs -nw'
# color for man pages
#export MANROFFOPT='-c'
#export MANPAGER='less -Dd+y -Dur --use-color'

# https://www.gnu.org/software/libc/manual/html_node/Locales.html
# LANG=en_US.UTF-8   # current locale
# LC_ALL=            # locale based on environment variable (i.e. en_US.UTF-8)
export LC_PAPER='sk_SK.UTF-8'
export LC_MEASUREMENT='sk_SK.UTF-8'

export LS_COLORS=$LS_COLORS:'di=01;30:'   # bold black dirname color
ls_common='--color=auto --group-directories-first --time-style="+%F %T"'
# LC_COLLATE: filename sorting (case sensitive, dot files first, etc.)
# don't use recommended LC_ALL=C (overrides any others LC_ variables, used in ls bellow)
if locale -a | grep -i -x -q 'C.UTF8'; then
    # glibc 2.35 (2022-02) support C.UTF-8 locale
    alias ls="LC_COLLATE=C.UTF8 ls $ls_common"
else
    alias ls="LC_COLLATE=C ls $ls_common"
fi
unset ls_common
# LC_NUMERIC: number formatting (thousands separator)
# $ LC_NUMERIC= locale -k LC_NUMERIC   # (i.e. en_US.UTF-8)
# thousands_sep="," (de_DE.UTF8 => ".", sk_SK.utf8 => " ", C => "")
# https://www.gnu.org/software/coreutils/manual/html_node/Block-size.html
alias lls="ls -l --block-size=\"'1\""         # or global BLOCK_SIZE env
alias lls-dot='LC_NUMERIC=de_DE.UTF8 lls'
# LC_TIME: data and time formatting (full time format)
# https://www.gnu.org/software/coreutils/manual/html_node/Formatting-file-timestamps.html
alias llt='ls -l --time-style="+%F %T %:z"'   # or global TIME_STYLE env
alias llt-utc='TZ=UTC llt'
# format strings separated by a newline are used for non-recent and recent files
#tsf_newline=$'\n'   # bash ANSI-C Quoting
#alias llt='ls -l --time-style="+%F %H:%M:%S $tsf_newline%F %H:%M:%S^"'

alias cp='cp -p'
alias scp='scp -p'
alias sftp='sftp -p'
alias dos2unix='dos2unix -k'
alias unix2dos='unix2dos -k'
alias root='root --version && root -l --web=off'
# source /cern/root_v5-34-00-patches/bin/thisroot.sh
# alias root='root -l'

# https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh
source /usr/share/git-core/contrib/completion/git-prompt.sh
# unstaged '*' and staged '+' changes !!! slows down the bash prompt !!!
GIT_PS1_SHOWDIRTYSTATE=true
# something is stashed '$'
GIT_PS1_SHOWSTASHSTATE=true
# untracked files '%'
GIT_PS1_SHOWUNTRACKEDFILES=true
# difference between HEAD and its upstream '<', '>', '<>'  or '='
GIT_PS1_SHOWUPSTREAM="auto"
# change PS1
PS1='[\u@\h \W$(__git_ps1 " (%s)")]\$ '
